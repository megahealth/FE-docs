## 项目现状

医疗网络版和单机版的多数业务都有重合，但是一直使用两套框架和代码来开发，在开发效率和便捷性上都不够理想。因此考虑将项目合并，使网络版支持单机模式。

## 功能分析

| 功能     | 网络版                                                       | 单机版                                     |
| -------- | ------------------------------------------------------------ | ------------------------------------------ |
| 数据交互 | 4G平板客户端与服务器直接通信，进行数据的增删改查。           | 平板连接设备热点，与设备通过web接口通信。  |
| 账户体系 | 一个二级账号绑定一台设备生成报告后填写用户，多个二级账号从属于一个一级账号 | 一个账号任意切换设备，一台设备绑定一位用户 |
| 主要业务 | 查看、编辑报告，查看设备状态，绑定戒指                       | 查看、编辑报告，查看设备状态，绑定戒指     |

两个版本的差异主要在数据交互和账户体系上，在查看报告和设备操作上并没有太大区别。

## 解决方案

对网络版客户端程序进行重构，配置联网和单机两种工作模式。

联网工作模式下，仍配合网络版的设备固件进行使用，客户端从服务器获取数据，使用一二级账号体系

单机工作模式下，配合单机版的设备固件进行使用，客户端连接wifi，从本地获取数据，使用默认单一账号

两种工作模式允许手动切换

## 重构

医疗单机版使用angularjs框架，网络版使用angular5框架，抛弃单机版项目，将单机版功能合并到网络版项目中，根据联网模式进行数据交互和登录鉴权的区隔。

开发周期评估：

| 项目         | 人周 |
| ------------ | ---- |
| 理清业务需求 | 3    |
| 设计架构     | 3    |
| 编码         | 12   |
| 测试         | 3    |
| 总计         | 21   |